@page "/AddList"
@using System.Text.Json.Serialization
@using System.Text.Json
@using System.Text
@using TodoList.Shared
@inject NavigationManager NavManager
@layout DashboardLayout
<style>
    input:focus {
        border-color: #228B22 !important;
        box-shadow: 0 0 5px rgba(34, 139, 34, 0.5) !important;
    }

    h1.title {
        text-align: center;
        font-size: 40px;
        font-weight: bold;
        background: linear-gradient(to right, #228B22, #fff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
</style>
<div class="container mt-5">
    <h1 class="title">Add Todolist</h1>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card mt-4">
                <div class="card-body">
                    <form>
                        <div class="form-group" style="margin-top: 10px;">
                            <label for="title">Title</label>
                            <input type="text" class="form-control" @bind="todoList.Title" id="title" placeholder="Enter your Title" required>
                        </div>
                        <div class="form-group" style="margin-top: 10px;">
                            <label for="desc">Description</label>
                            <input type="text" class="form-control" @bind="todoList.Desc" id="desc" placeholder="Enter your password" required>
                        </div>
                        <div class="form-group mb-4" style="margin-top: 10px;">
                            <button type="submit" class="btn btn-success btn-block" style="background-color: #228B22;" >
                                Add
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="signupModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #228B22; color: #fff; margin-top: 10px;">
                <h5 class="modal-title">Sign Up</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Signup form can be placed here...</p>
            </div>
        </div>
    </div>
</div>
@code {
    TodoListDto todoList = new TodoListDto();


    private async Task onsubmit()
    {
        using (HttpClient client = new HttpClient())
        {
            try
            {
                string url = "https://localhost:7097/TodoList/AddTodoList";
                string jsonBody = JsonSerializer.Serialize(todoList);
                StringContent data = new StringContent(jsonBody, Encoding.UTF8, "application/json");
                HttpResponseMessage response = await client.PostAsync(url,data);
                if (response.IsSuccessStatusCode)
                {
                    // Read and print the content of the response
                    string content = await response.Content.ReadAsStringAsync();
                    UserDto user = JsonSerializer.Deserialize<UserDto>(content);
                    if (user != null)
                    {
                       
                    }
                    Console.WriteLine(content);
                }
                else
                {
                    // Print the status code if the request was not successful
                    Console.WriteLine($"Request failed with status code: {response.StatusCode}");
                }
            }
            catch (Exception ex)
            {
                // Handle exceptions
                Console.WriteLine($"An error occurred: {ex.Message}");
            }
        }
    }
}
